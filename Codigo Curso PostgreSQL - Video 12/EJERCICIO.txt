-- LAMINA 119

BEGIN;

INSERT INTO CLINICA.PACIENTE
VALUES ('P-0013', 'SAMANTA', 'RIVERA', 'F', '1998-01-01', 'MONTERREY', 'NUEVO LEON', '5552258964');

-- LAMINA 120

-- INSERTAR 1 PACIENTE Y TAMBIÃ‰N SU EXPEDIENTE
-- REALIZAR UN SAVEPOINT DE NOMBRE "INSERCION_PACIENTE"
-- ACTUALIZAR SUS PADECIMIENTOS CRONICOS Y ALERGIAS DEL PACIENTE PREVIAMENTE INGRESADO

INSERT INTO CLINICA.EXPEDIENTE
VALUES ('P-0013', 'A NEGATIVO', 'NA', 'NA', '2022-07-12');

SAVEPOINT INSERCION_PACIENTE;

UPDATE CLINICA.EXPEDIENTE SET padecimientoCro = 'DIABETES TIPO 2', tipoAlergia = 'ALERGIA AL POLVO' WHERE pk_idPaciente ='P-0013';

SELECT * FROM CLINICA.EXPEDIENTE WHERE pk_idPaciente = 'P-0013';

-- LAMINA 121

-- REALIZAR UN SAVEPOINT DE NOMBRE "ACTUALIZAR EXPEDIENTE"
-- BORRAR AL PACIENTE PREVIAMENTE INSERTADO

SAVEPOINT ACTUALIZAR_EXPEDIENTE;

DELETE FROM CLINICA.PACIENTE WHERE pk_idPaciente = 'P-0013';

SELECT * FROM CLINICA.PACIENTE;

-- LAMINA 122

-- REALIZAR UN ROLLBACK HACIA EL SAVEPOINT "ACTUALIZAR EXPEDIENTE"
-- FINALIZAR LA TRANSACCION

ROLLBACK TO ACTUALIZAR_EXPEDIENTE;
SELECT * FROM CLINICA.PACIENTE;
COMMIT;

